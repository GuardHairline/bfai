# 基准任务工时及月度明细表功能实现说明

## 功能描述
当用户点击"参考并测算"按钮后，系统会：
1. 自动生成用户对话消息
2. 显示AI思考过程（"已思考"、"已使用:同步历史项目数据至临时表"等）
3. 返回一个可编辑的"基准任务工时及月度明细表"

## 实现细节

### 1. 新增组件

#### BaselineWorkHoursTable.jsx
- 可编辑的表格组件
- 支持添加、编辑、删除行
- 包含所有必需的列：序号、动力配置、一级任务、改动类型、定义范围、具体事项、基准工时、填报总工时、202507、202508、操作
- 提供编辑按钮和保存/取消功能

### 2. 修改的组件

#### useChat.js
- 添加了 `generateBaselineWorkHoursResponse` 函数
- 生成思考过程消息序列
- 生成表格数据并推送到聊天记录
- 修改了 `generateReferenceProjectMessage` 函数，自动触发AI回复

#### ChatContentRenderer.jsx
- 添加了对 `baseline-work-hours-table` 角色的支持
- 渲染 BaselineWorkHoursTable 组件

#### App.js
- 传递 `generateBaselineWorkHoursResponse` 函数给 ChatContentRenderer

### 3. 消息流程

1. 用户点击"参考并测算"按钮
2. 生成用户消息："帮我依据XXX项目生成待测算项目DE001-测试用的数据"
3. 延迟1秒后自动生成AI回复：
   - "已思考"
   - "已使用:同步历史项目数据至临时表"
   - "已思考"
   - "已使用:查询基准任务工时及月度明细"
   - "已思考"
4. 显示可编辑的基准任务工时及月度明细表

### 4. 表格功能

#### 表格列
- 序号：自动编号
- 动力配置：默认值"DE09（4B15E+DHT-3+PHEV+国内专属）"
- 一级任务：可编辑文本
- 改动类型：下拉选择（借用、小改、全新）
- 定义范围：可编辑文本（初始为空）
- 具体事项：可编辑文本
- 基准工时：数字输入
- 填报总工时：数字输入（初始为0）
- 202507：数字输入（初始为0）
- 202508：数字输入（初始为0）
- 操作：编辑、保存、取消、删除按钮

#### 编辑功能
- 点击"编辑"按钮进入编辑模式
- 支持行内编辑
- 提供保存和取消操作
- 支持添加新行
- 支持删除行
- 全局编辑模式切换

### 5. 数据格式

```javascript
{
  key: 'unique_id',
  serialNumber: 1,
  powerConfig: 'DE09（4B15E+DHT-3+PHEV+国内专属）',
  primaryTask: '计算数模质量质心',
  changeType: '借用',
  definitionScope: '',
  specificItem: '测试、完全借用',
  baselineHours: 40,
  totalReportedHours: 0,
  month202507: 0,
  month202508: 0,
}
```

## 测试验证
- 已通过单元测试验证消息生成功能
- 表格组件功能完整，支持所有编辑操作
- 数据流传递正确，组件间通信正常

功能已完全实现并可以正常使用！
